<template>
<div >
     <apexchart v-if="gamedata" width="500" type="heatmap" :options="chartOptions" :series="series"></apexchart>
   </div>
</template>

<script>


export default {
    name: "HeatMap",
    props: ["gamedata","team","parte"],
    data: function() {
      return {
        teamdata: [[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
                   [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
                   [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
                   [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
                   [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
                   [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
                   [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
                   [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
                   [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
                   [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
                   [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
                   [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
                   [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
                   [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
                   [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
                   [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
                   [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
                   [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
                   [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
                   [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
                   [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
                   [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
                   [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
                   [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],
        chartOptions: {
          chart: {
            id: 'vuechart-example'
          },
          xaxis: {
            categories: [0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,
                        23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43]
          },
          plotOptions: {
            heatmap: {
                colorScale: {
                    ranges: [{
                        from: 0,
                        to: 20,
                        color: '#00A100',
                        name: 'low',
                    },
                        {
                        from: 20,
                        to: 45,
                        color: '#f4e000',
                        name: 'medium',
                      },
                      {
                        from:45,
                        to: 60,
                        color: '#ff2a00',
                        name: 'high',
                      }
        ]
      }
    }
  }

        },
        series: [{
          name: '0',
          data:  [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}, {    
          name: '1',
          data:  [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}, {    
          name: '2',
          data:  [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}, {    
          name: '3',
          data:  [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}, {    
          name: '4',
          data:  [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}, {    
          name: '5',
          data:  [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}, {    
          name: '6',
          data:  [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}, {    
          name: '7',
          data:  [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}, {    
          name: '8',
          data:  [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}, {    
          name: '9',
          data:  [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}, {    
          name: '10',
          data:  [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}, {    
          name: '11',
          data:  [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}, {    
          name: '12',
          data:  [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}, {    
          name: '13',
          data:  [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}, {    
          name: '14',
          data:  [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}, {    
          name: '15',
          data:  [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}, {    
          name: '16',
          data:  [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}, {    
          name: '17',
          data:  [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}, {    
          name: '18',
          data:  [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}, {    
          name: '19',
          data:  [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}, {    
          name: '20',
          data:  [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}, {        
          name: '21',
          data:  [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}, {    
          name: '22',
          data:  [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}, {    
          name: '23',
          data:  [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}] 
      }
    },
    methods: {
      getData: function() {
        if (this.team=='A') {
        if (this.parte=='1') {
          for(var i = 0; i < this.gamedata.teamA.players.length;i++ )
            for(var j = 0; j <= 1500;j++)
                this.teamdata[this.gamedata.teamA.players[i].pos[j].posY.toFixed()][this.gamedata.teamA.players[i].pos[j].posX.toFixed()]++;        }
        else {
          for(var i = 0; i < this.gamedata.teamA.players.length;i++ )
            for(var j = 15001; j <= 3000;j++) 
                this.teamdata[this.gamedata.teamA.players[i].pos[j].posY.toFixed()][this.gamedata.teamA.players[i].pos[j].posX.toFixed()]++;
        }
        }
        else {
          if (this.parte=='1') {
          for(var i = 0; i < this.gamedata.teamB.players.length;i++ )
            for(var j = 0; j <= 1500;j++)
                this.teamdata[this.gamedata.teamB.players[i].pos[j].posY.toFixed()][this.gamedata.teamA.players[i].pos[j].posX.toFixed()]++;
        }
        else {
          for(var i = 0; i < this.gamedata.teamB.players.length;i++ )
            for(var j = 1501; j <= 3000;j++) 
                this.teamdata[this.gamedata.teamB.players[i].pos[j].posY.toFixed()][this.gamedata.teamA.players[i].pos[j].posX.toFixed()]++;
        }
        }
      },
        getPos: function(pos){
          if (0<=pos && pos<=4) return 0;
          else if (4<pos && pos<=8) return 1;
          else if (8<pos && pos<=12) return 2;
          else if (12<pos && pos<=16) return 3;
          else if (16<pos && pos<=20) return 4;
          else if (20<pos && pos<=24) return 5;
          else if (24<pos && pos<=28) return 6;
          else if (28<pos && pos<=32) return 7;
          else if (32 <pos && pos<=36) return 8;
          else if (36<pos && pos<=40) return 9;
          else return 10;
    },
    populate: function() {
      return [{
          name: '0',
          data:  this.teamdata[0]}, {    
          name: '1',
          data:  this.teamdata[1]}, {    
          name: '2',
          data:  this.teamdata[2]}, {    
          name: '3',
          data:  this.teamdata[3]}, {    
          name: '4',
          data:  this.teamdata[4]}, {    
          name: '5',
          data:  this.teamdata[5]}, {    
          name: '6',
          data:  this.teamdata[6]}, {    
          name: '7',
          data:  this.teamdata[7]}, {    
          name: '8',
          data:  this.teamdata[8]}, {    
          name: '9',
          data:  this.teamdata[9]}, {    
          name: '10',
          data:  this.teamdata[10]}, {    
          name: '11',
          data:  this.teamdata[11]}, {    
          name: '12',
          data:  this.teamdata[12]}, {    
          name: '13',
          data:  this.teamdata[13]}, {    
          name: '14',
          data:  this.teamdata[14]}, {    
          name: '15',
          data:  this.teamdata[15]}, {    
          name: '16',
          data:  this.teamdata[16]}, {    
          name: '17',
          data:  this.teamdata[17]}, {    
          name: '18',
          data:  this.teamdata[18]}, {    
          name: '19',
          data:  this.teamdata[19]}, {    
          name: '20',
          data:  this.teamdata[20]}, {        
          name: '21',
          data:  this.teamdata[21]}, {    
          name: '22',
          data:  this.teamdata[22]}, {    
          name: '23',
          data:  this.teamdata[23]}, {    
          }];
  }
    },
      watch: { gamedata(){ this.getData();
      this.series = this.populate();} } 
};

</script>


 