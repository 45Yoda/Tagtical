<!DOCTYPE html>
<html>

<head>
	<meta charset=utf-8>
	<title>P5 app</title>
	<script type='text/javascript' src="p5.min.js"></script>
	<script type='text/javascript' src="p5.dom.js"></script>
	<script type="text/javascript" src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
</head>

<body>

	<div id='myContainer' ></div>

	<script>

//	<script src="https://unpkg.com/axios/dist/axios.min.js">
//<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.18.0/axios.min.js">
	

		let x = 320;
		let y = 180;
		let xspeed = 5;
		let yspeed = 2;

		let r = 25;



		let bg;

		let pos1A;
		let pos2A;
		let pos3A;
		let pos4A;
		let pos5A;
		let pos1B;
		let pos2B;
		let pos3B;
		let pos4B;
		let pos5B;
		let i = 0;
		var t;
		var t1;

		let json;

		let counter = 0;
		let startTime= 0;
		let maxTime = 6000;

		
		//console.log("Outside")
		//console.log(jsonfile)

			

		function stupidshit(data){
			json = data;
			//console.log(json);
			//console.log(data)
		}
		

		function preload() {

			loadJSON("http://localhost:5000/api/games/5cebfb862372253811f9f811",gotData);

			//jsonfile = loadJSON("out.json");
			//console.log("In Preload")
			//console.log(jsonfile);
			bg = loadImage("field2.png");
			//console.log(jsonfile);


		}

		function gotData(data){
			console.log(data);
			json = data;
		}


		function setup() {
	
			console.log(json)
			t = 1;
			t1 = 0;

			
			
			console.log(json.teamA.name);
			let canvas = createCanvas(640, 360);
			

			pos1A = json.teamA.players[0].pos;
			
			canvas.class("lemon");

			/*
			pos2A = jsonfile.teamA.players[1].pos;
			pos3A = jsonfile.teamA.players[2].pos;
			pos4A = jsonfile.teamA.players[3].pos;
			pos5A = jsonfile.teamA.players[4].pos;
			pos1B = jsonfile.teamB.players[0].pos;
			pos2B = jsonfile.teamB.players[1].pos;
			pos3B = jsonfile.teamB.players[2].pos;
			pos4B = jsonfile.teamB.players[3].pos;
			pos5B = jsonfile.teamB.players[4].pos;

			pos1A.x = ((pos1A[i].posX*640)/44);
			pos1A.y = (360-(pos1A[i].posY*360)/22);
			
			
			pos2A.x = ((pos2A[i].posX*640)/44);
			pos2A.y = (360-(pos2A[i].posY*360)/22);
			pos3A.x = ((pos3A[i].posX*640)/44);
			pos3A.y = (360-(pos3A[i].posY*360)/22);
			pos4A.x = ((pos4A[i].posX*640)/44);
			pos4A.y = (360-(pos4A[i].posY*360)/22);
			pos5A.x = ((pos5A[i].posX*640)/44);
			pos5A.y = (360-(pos5A[i].posY*360)/22);

			pos1B.x = ((pos1B[i].posX*640)/44);
			pos1B.y = (360-(pos1B[i].posY*360)/22);
			pos2B.x = ((pos2B[i].posX*640)/44);
			pos2B.y = (360-(pos2B[i].posY*360)/22);
			pos3B.x = ((pos3B[i].posX*640)/44);
			pos3B.y = (360-(pos3B[i].posY*360)/22);
			pos4B.x = ((pos4B[i].posX*640)/44);
			pos4B.y = (360-(pos4B[i].posY*360)/22);
			pos5B.x = ((pos5B[i].posX*640)/44);
			pos5B.y = (360-(pos5B[i].posY*360)/22);
			
			*/
		}

	
		function draw() {
			background(bg);


		/*
			fill(244,3,3);
			noStroke();
			rect(20,330,map(counter-startTime,0,maxTime,0,600),19);
			noFill();
			stroke(0);
			rect(20,330,600,20);
			*/

			//startTime = -t;

			fill(color(0, 128, 0));
			//ellipse(50, 180, 20, 20);


			if(int(t-t1)==1){
				t1+=1;
				
				if (i < 5999) {
					i++;
				}
				pos1A.x = ((pos1A[i].posX*640)/44);
				pos1A.y = (360-(pos1A[i].posY*360)/22);
			
				/*
				pos2A.x = ((pos2A[i].posX*640)/44);
				pos2A.y = (360-(pos2A[i].posY*360)/22);
				pos3A.x = ((pos3A[i].posX*640)/44);
				pos3A.y = (360-(pos3A[i].posY*360)/22);
				pos4A.x = ((pos4A[i].posX*640)/44);
				pos4A.y = (360-(pos4A[i].posY*360)/22);
				pos5A.x = ((pos5A[i].posX*640)/44);
				pos5A.y = (360-(pos5A[i].posY*360)/22);

				pos1B.x = ((pos1B[i].posX*640)/44);
				pos1B.y = (360-(pos1B[i].posY*360)/22);
				pos2B.x = ((pos2B[i].posX*640)/44);
				pos2B.y = (360-(pos2B[i].posY*360)/22);
				pos3B.x = ((pos3B[i].posX*640)/44);
				pos3B.y = (360-(pos3B[i].posY*360)/22);
				pos4B.x = ((pos4B[i].posX*640)/44);
				pos4B.y = (360-(pos4B[i].posY*360)/22);
				pos5B.x = ((pos5B[i].posX*640)/44);
				pos5B.y = (360-(pos5B[i].posY*360)/22);
			
			
			
				console.log("POSIÇÂO X")
				console.log(pos1A.x)
				console.log("POSIÇÂO Y")
				console.log(pos1A.y)
				*/
			
			}
			

			t+=0.039


			ellipse(pos1A.x, pos1A.y, 20, 20);

		/*
			ellipse(pos2A.x, pos2A.y, 20, 20);
			ellipse(pos3A.x, pos3A.y, 20, 20);
			ellipse(pos4A.x, pos4A.y, 20, 20);
			ellipse(pos5A.x, pos5A.y, 20, 20);


			fill(color(200, 200, 0));
			
			ellipse(pos1B.x, pos1B.y, 20, 20);
			ellipse(pos2B.x, pos2B.y, 20, 20);
			ellipse(pos3B.x, pos3B.y, 20, 20);
			ellipse(pos4B.x, pos4B.y, 20, 20);
			ellipse(pos5B.x, pos5B.y, 20, 20);

		*/

			pos1A.x += (((pos1A[i+1].posX * 640)/44)-pos1A.x)*0.17;
			pos1A.y += ((360-(pos1A[i+1].posY * 360)/22)-pos1A.y)*0.17;
			
			/*
			pos2A.x += (((pos2A[i+1].posX * 640)/44)-pos2A.x)*0.17;
			pos2A.y += ((360-(pos2A[i+1].posY * 360)/22)-pos2A.y)*0.17;
			pos3A.x += (((pos3A[i+1].posX * 640)/44)-pos3A.x)*0.17;
			pos3A.y += ((360-(pos3A[i+1].posY * 360)/22)-pos3A.y)*0.17;
			pos4A.x += (((pos4A[i+1].posX * 640)/44)-pos4A.x)*0.17;
			pos4A.y += ((360-(pos4A[i+1].posY * 360)/22)-pos4A.y)*0.17;
			pos5A.x += (((pos5A[i+1].posX * 640)/44)-pos5A.x)*0.17;
			pos5A.y += ((360-(pos5A[i+1].posY * 360)/22)-pos5A.y)*0.17;

			
			pos1B.x += (((pos1B[i+1].posX * 640)/44)-pos1B.x)*0.17;
			pos1B.y += ((360-(pos1B[i+1].posY * 360)/22)-pos1B.y)*0.17;
			pos2B.x += (((pos2B[i+1].posX * 640)/44)-pos2B.x)*0.17;
			pos2B.y += ((360-(pos2B[i+1].posY * 360)/22)-pos2B.y)*0.17;
			pos3B.x += (((pos3B[i+1].posX * 640)/44)-pos3B.x)*0.17;
			pos3B.y += ((360-(pos3B[i+1].posY * 360)/22)-pos3B.y)*0.17;
			pos4B.x += (((pos4B[i+1].posX * 640)/44)-pos4B.x)*0.17;
			pos4B.y += ((360-(pos4B[i+1].posY * 360)/22)-pos4B.y)*0.17;
			pos5B.x += (((pos5B[i+1].posX * 640)/44)-pos5B.x)*0.17;
			pos5B.y += ((360-(pos5B[i+1].posY * 360)/22)-pos5B.y)*0.17;
			
			*/
		

		}

	/*	function keyPressed(){
			if(key == 'p')
				noLoop();
			if(key == 'r')
				loop();
			if(key == 's')
				redraw();
		}

		function mousePressed(){
			
			if(dist(mouseX,mouseY,pos1A.x,pos1A.y) < 20){
				removeElements();
				name1A = jsonfile.teamA.players[0].name;
				console.log(name1A);
				let txt = createDiv("My name is " + name1A)
				txt.class('lime')
				//txt.position(400,50);
				txt.parent('myContainer');
				dist1A = jsonfile.teamA.players[0].data.dist;
				vel_media1A = jsonfile.teamA.players[0].data.vel_media;
				vel_max1A = jsonfile.teamA.players[0].data.vel_max;
				let txt2 = createDiv("Distância: " + dist1A);
				txt2.class('lime')
				//txt2.position(400,80);
				txt2.parent('myContainer');
				let txt3 = createDiv("Velocidade Média: " + vel_media1A);
				txt3.class('lime')
				//txt3.position(400,100);
				txt3.parent('myContainer');
				let txt4 = createDiv("Velcidade Máxima: " + vel_max1A);
				txt4.class('lime')
				//txt4.position(400,120);
				txt4.parent('myContainer');
				
			}
			else{
				removeElements();
				let txt = createDiv('This is not a string')
			}
		
		}*/
		
	</script>

</body>



</html>
<style>
	.lime{
		padding-top: 10px;
		text-align: center;
	}

	canvas{
		padding:0;
		margin: auto;
		display: block;
		width: 640px;
		height: 360px;
		position: absolute;
		top: 0;
		bottom: 0;
		left: 0;
		right: 0;
	}
</style>