<!DOCTYPE html>
<html>

<head>
	<meta charset=utf-8>
	<title>P5 app</title>
	<script type='text/javascript' src="p5.min.js"></script>
	<script type="text/javascript" src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
</head>

<body>
	<script>
		let x = 320;
		let y = 180;
		let xspeed = 5;
		let yspeed = 2;

		let r = 25;



		let jsonfile;
		let bg;

		let pos1A;
		let pos2A;
		let pos3A;
		let pos4A;
		let pos5A;
		let pos1B;
		let pos2B;
		let pos3B;
		let pos4B;
		let pos5B;
		let i = 0;
		var t;
		var t1;

		let counter = 0;
		let startTime= 0;
		let maxTime = 6000;
		


		function preload() {
			jsonfile = loadJSON("out.json");
			bg = loadImage("field2.png");
			console.log(jsonfile);


		}


		function setup() {

			t = 1;
			t1 = 0;


			console.log(jsonfile.teamA.name);
			createCanvas(640, 360);
			pos1A = jsonfile.teamA.players[0].pos;
			pos2A = jsonfile.teamA.players[1].pos;
			pos3A = jsonfile.teamA.players[2].pos;
			pos4A = jsonfile.teamA.players[3].pos;
			pos5A = jsonfile.teamA.players[4].pos;
			pos1B = jsonfile.teamB.players[0].pos;
			pos2B = jsonfile.teamB.players[1].pos;
			pos3B = jsonfile.teamB.players[2].pos;
			pos4B = jsonfile.teamB.players[3].pos;
			pos5B = jsonfile.teamB.players[4].pos;

			pos1A.x = ((pos1A[i].posX*640)/44);
			pos1A.y = (360-(pos1A[i].posY*360)/22);
			pos2A.x = ((pos2A[i].posX*640)/44);
			pos2A.y = (360-(pos2A[i].posY*360)/22);
			pos3A.x = ((pos3A[i].posX*640)/44);
			pos3A.y = (360-(pos3A[i].posY*360)/22);
			pos4A.x = ((pos4A[i].posX*640)/44);
			pos4A.y = (360-(pos4A[i].posY*360)/22);
			pos5A.x = ((pos5A[i].posX*640)/44);
			pos5A.y = (360-(pos5A[i].posY*360)/22);

			pos1B.x = ((pos1B[i].posX*640)/44);
			pos1B.y = (360-(pos1B[i].posY*360)/22);
			pos2B.x = ((pos2B[i].posX*640)/44);
			pos2B.y = (360-(pos2B[i].posY*360)/22);
			pos3B.x = ((pos3B[i].posX*640)/44);
			pos3B.y = (360-(pos3B[i].posY*360)/22);
			pos4B.x = ((pos4B[i].posX*640)/44);
			pos4B.y = (360-(pos4B[i].posY*360)/22);
			pos5B.x = ((pos5B[i].posX*640)/44);
			pos5B.y = (360-(pos5B[i].posY*360)/22);
			

		}

		function draw() {
			background(bg);


		
			fill(244,3,3);
			noStroke();
			rect(20,330,map(counter-startTime,0,maxTime,0,600),19);
			noFill();
			stroke(0);
			rect(20,330,600,20);

			startTime = -t;

			fill(color(0, 128, 0));
			//ellipse(50, 180, 20, 20);


			if(int(t-t1)==1){
				t1+=1;
				
				if (i < 5999) {
					i++;
				}
				pos1A.x = ((pos1A[i].posX*640)/44);
				pos1A.y = (360-(pos1A[i].posY*360)/22);
				pos2A.x = ((pos2A[i].posX*640)/44);
				pos2A.y = (360-(pos2A[i].posY*360)/22);
				pos3A.x = ((pos3A[i].posX*640)/44);
				pos3A.y = (360-(pos3A[i].posY*360)/22);
				pos4A.x = ((pos4A[i].posX*640)/44);
				pos4A.y = (360-(pos4A[i].posY*360)/22);
				pos5A.x = ((pos5A[i].posX*640)/44);
				pos5A.y = (360-(pos5A[i].posY*360)/22);

				pos1B.x = ((pos1B[i].posX*640)/44);
				pos1B.y = (360-(pos1B[i].posY*360)/22);
				pos2B.x = ((pos2B[i].posX*640)/44);
				pos2B.y = (360-(pos2B[i].posY*360)/22);
				pos3B.x = ((pos3B[i].posX*640)/44);
				pos3B.y = (360-(pos3B[i].posY*360)/22);
				pos4B.x = ((pos4B[i].posX*640)/44);
				pos4B.y = (360-(pos4B[i].posY*360)/22);
				pos5B.x = ((pos5B[i].posX*640)/44);
				pos5B.y = (360-(pos5B[i].posY*360)/22);
			}
			

			t+=0.039


			ellipse(pos1A.x, pos1A.y, 20, 20);
			ellipse(pos2A.x, pos2A.y, 20, 20);
			ellipse(pos3A.x, pos3A.y, 20, 20);
			ellipse(pos4A.x, pos4A.y, 20, 20);
			ellipse(pos5A.x, pos5A.y, 20, 20);


			fill(color(200, 200, 0));
			
			ellipse(pos1B.x, pos1B.y, 20, 20);
			ellipse(pos2B.x, pos2B.y, 20, 20);
			ellipse(pos3B.x, pos3B.y, 20, 20);
			ellipse(pos4B.x, pos4B.y, 20, 20);
			ellipse(pos5B.x, pos5B.y, 20, 20);



			pos1A.x += (((pos1A[i+1].posX * 640)/44)-pos1A.x)*0.17;
			pos1A.y += ((360-(pos1A[i+1].posY * 360)/22)-pos1A.y)*0.17;
			pos2A.x += (((pos2A[i+1].posX * 640)/44)-pos2A.x)*0.17;
			pos2A.y += ((360-(pos2A[i+1].posY * 360)/22)-pos2A.y)*0.17;
			pos3A.x += (((pos3A[i+1].posX * 640)/44)-pos3A.x)*0.17;
			pos3A.y += ((360-(pos3A[i+1].posY * 360)/22)-pos3A.y)*0.17;
			pos4A.x += (((pos4A[i+1].posX * 640)/44)-pos4A.x)*0.17;
			pos4A.y += ((360-(pos4A[i+1].posY * 360)/22)-pos4A.y)*0.17;
			pos5A.x += (((pos5A[i+1].posX * 640)/44)-pos5A.x)*0.17;
			pos5A.y += ((360-(pos5A[i+1].posY * 360)/22)-pos5A.y)*0.17;

			pos1B.x += (((pos1B[i+1].posX * 640)/44)-pos1B.x)*0.17;
			pos1B.y += ((360-(pos1B[i+1].posY * 360)/22)-pos1B.y)*0.17;
			pos2B.x += (((pos2B[i+1].posX * 640)/44)-pos2B.x)*0.17;
			pos2B.y += ((360-(pos2B[i+1].posY * 360)/22)-pos2B.y)*0.17;
			pos3B.x += (((pos3B[i+1].posX * 640)/44)-pos3B.x)*0.17;
			pos3B.y += ((360-(pos3B[i+1].posY * 360)/22)-pos3B.y)*0.17;
			pos4B.x += (((pos4B[i+1].posX * 640)/44)-pos4B.x)*0.17;
			pos4B.y += ((360-(pos4B[i+1].posY * 360)/22)-pos4B.y)*0.17;
			pos5B.x += (((pos5B[i+1].posX * 640)/44)-pos5B.x)*0.17;
			pos5B.y += ((360-(pos5B[i+1].posY * 360)/22)-pos5B.y)*0.17;
			


		}

		function keyPressed(){
			if(key == 'p')
				noLoop();
			if(key == 'r')
				loop();
			if(key == 's')
				redraw();
		}
	</script>

</body>



</html>
<style>
	canvas{
		padding:0;
		margin: auto;
		display: block;
		width: 640px;
		height: 360px;
		position: absolute;
		top: 0;
		bottom: 0;
		left: 0;
		right: 0;
	}
</style>